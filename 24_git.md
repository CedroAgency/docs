# Работа с Git

Для работы с репозиториями мы используем [GitHub](https://github.com).

[Шпаргалка для бэкеров по настройке](24_git_install.md)

## 1 репо на 1 проект и структура

При старте проекта необходимо учитывать дальнейшнее развитие проекта. 

Так, если проект стартует с вёрстки и далее передаётся внутри компании, необходимо соблюсти структуру, которая позволит вашей вёрстке "обрасти" бэком на сервере. В этом случае создаём вложенность **/local/html/**, в которую необходимо развестить билд. Должен получится такой путь:

**/local/html/build/index.html**

При разработке бэка проекта, необходимо пушить только изменяемые файлы, избегая объёмных, файлов админки и большого количества однообразного контента. Так, например, при разработке на Bitrix, не следует выгружать в Git папки /bitrix/ и /upload/. Возможна загрузка избранных файлов по необходимости.

## Работа с ветками

* main - основная ветка разработки
* production - ветка для боевого сайта

**Обязательно!** Перед началом работы выполняйте **git pull origin main**, чтобы стянуть последние наработки по проекту.

_После запуска проекта в бой, необходимо так же проверять наличие изменений в production_

Работать с веткой main напрямую может только основной верстальщик и разработчик. 

Если вас подключили к проекту на разработку 1 модуля, следует создать свою ветку с именем **dev-[Ваше имя]** или **dev-[Название модуля]**, например dev-vasya. После выполнения очередной задачи свою ветку необходимо сливать с веткой **main**. Пушить в ветку **main** нежелательно, для объединения лучше выполнить **pull request (далее PR)** из вашей ветки в ветку main. PR в мастер может принимать любой разработчик, но лучше основной. С веткой main допустимо использовать **pull** для веток dev-* с дальнейшим решением конфликтов.

Пушить в свою ветку и сливать с main необходимо минимум 1 раз в день


## Ветка production

Перенос изменений на боевой сервер **всегда** проходит через Git и **pull request** в ветку production.

Изменения на боевом сервере истинное зло, но порой неизбежное. При необходимости внесений изменений нужно обязательно проверить соответствие репозиторию ветке production. При необходимости, сделайте push в ветку или PR.

После внесения изменений необходимо обязательно их запушить с **развёрнутым** коммитом.

## Коммиты

К коммитам строгих требований нет. Сообщения коммитов должны быть короткие и доносить основной смысл выполненного объема работ. Желательно, чтобы сообщение коммита было на английском языке.

## Конфликты

При возникновении конфликтов обязательно свяжитесь с разработчиком, который вносил изменения, чтобы вместе решить конфликты и не затереть актуальные наработки.

Если такой возможности нет, внимательно изучите конфликты и саму задачу, чтобы понять какая часть является актуальной. После разрешения конфликтов и отправки наработок в ветку, необходимо сообщить в чат проекта, менеджеру о произошедшем и попросить перепроверить актуальность изменений.

## README
После завершения проекта рекомендуется создать файл README который будет содержать информацию о лицензии, сервере, краткое описание изменений внесённых в ядро системы (если таковые имели место быть). 


