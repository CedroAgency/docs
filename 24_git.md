# Работа с Git


Для работы с репозиториями мы используем [Github](https://github.com/CedroAgency).

С самим GIT лучше работать через консоль. В качестве альтернативы консоли, можно можно порекомендорвать [Fork](https://www.google.com/search?q=Fork) или [Github Desktop](https://desktop.github.com).


[Шпаргалка для бэкеров по настройке](24_git_install.md)

## 1 репозиторий на 1 проект

Мы используем один репозиторий на протяжении всей разработки проекта - и для бэка, и для фронта.

При старте проекта необходимо учитывать дальнейшнее развитие проекта.
Так, если проект стартует с вёрстки и далее передаётся внутри компании, необходимо соблюсти [структуру](24_structure.md), которая позволит вашей вёрстке "обрасти" бэком на сервере.

При разработке бэка проекта, необходимо пушить только изменяемые файлы, избегая объёмных, файлов админки и большого количества однообразного контента. Так, например, при разработке на Bitrix, не следует выгружать в Git папки /bitrix/ и /upload/. Возможна загрузка избранных файлов по необходимости.

Если при разработке фронта, вам требуется хранить папку `build` в git, то обновляйте её отдельным коммитом, чтоб эти изменения не примешивались непосредственно в сам коммит с вашими правками.

## Работа с ветками

* main - ветка с последней стабильной версией, защищённая от прямого пуша.
* production - ветка для боевого сайта
* dev - основная ветка для разработки. От неё делаются все ветки для выполнения задач.


**Обязательно!** Перед началом работы выполняйте `git pull origin main`, чтобы стянуть последние наработки по проекту.

_После запуска проекта в бой, необходимо так же проверять наличие изменений в production_


**Работать с веткой main напрямую можно только если вы единственный разработчик в репозитории**


Если вас подключили к проекту на разработку 1 модуля, следует создать свою ветку от ветки **dev** c именем `dev-[Ваше имя]` или `dev-[Название модуля]`, например dev-vasya. После выполнения задачи, свою ветку необходимо сливать с веткой **dev** через Pull Request(далее PR), предварительно попросив проверить свой PR кого-то из команды. С веткой dev допустимо использовать **pull** для веток dev-* с дальнейшим решением конфликтов.


Пушить в свою ветку и сливать с dev рекомендуется минимум 1 раз в день, чтоб исключить потерю работы.


## Ветка production

Перенос изменений на боевой сервер **всегда** проходит через Git и **pull request** в ветку production.

Изменения на боевом сервере истинное зло, но порой неизбежное. При необходимости внесений изменений нужно обязательно проверить соответствие репозиторию ветке production. При необходимости, сделайте push в ветку или PR.

После внесения изменений необходимо обязательно их запушить с **развёрнутым** коммитом.


## Коммиты

К коммитам строгих требований нет. Сообщения коммитов должны быть короткие и доносить основной смысл выполненного объема работ. Желательно, чтобы сообщение коммита было на английском языке.


## Конфликты

При возникновении конфликтов природу которых вы не понимаете, свяжитесь с разработчиком, который вносил изменения, чтобы вместе решить конфликты и не затереть актуальные наработки.

Если такой возможности нет, внимательно изучите конфликты и саму задачу, чтобы понять какая часть является актуальной. После разрешения конфликтов и отправки наработок в ветку, необходимо сообщить в чат проекта, менеджеру о произошедшем и попросить перепроверить актуальность изменений.

## README
После завершения проекта рекомендуется создать файл README который будет содержать информацию о лицензии, сервере, краткое описание изменений внесённых в ядро системы (если таковые имели место быть).
